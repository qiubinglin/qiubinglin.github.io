---
layout:     post
title:      "计算机如何计算？！"
date:       2023-01-01 18:28:00
author:     "Bing"
catalog:    true
tags:
    - 数值分析
    - 数的表示与计算
---

# 多项式求值
加法和乘法是计算机最基本的运算单元，因此任何复杂计算都会被近似成多项式求值。

多项式求值的方法有很多种，通常情况下最优的求解方法是**嵌套乘法**，它能最小化计算次数
$$
    P(x) = a_0 + x(a_1 + x(a_2 + x(a_3 + ...)))
$$

# 二进制
在计算机中，数以二进制表示。整数的二进制表示是数字表示的基础。现代计算机基本使用无符号数编码与补码编码。

## 无符号数编码
对向量 $\vec{x} = [x_{w-1}, x_{w-2}...x_0]$
$$
    B2U_w (\vec{x}) = \sum_{i=0}^{w-1} x_i 2^i
$$

## 补码编码
对向量 $\vec{x} = [x_{w-1}, x_{w-2}...x_0]$
$$
    B2T_w (\vec{x}) = -x_{w-1} 2^{w-1} + \sum_{i=0}^{w-2} x_i 2^i
$$

# 浮点数
## 浮点格式
一个浮点数字包含三个部分：**符号**，**尾数**和**指数**。

**标准化的IEEE浮点数**表示为
$$
    \pm{1.b_1b_2b_3...b_i...b_N \times 2^{p}}
$$
其中 $b_i = 0 或 1$，表示一系列的二进制位值，$p$ 是一个 $M$ 位的二进制数。

对应的机器表示为
$$
    s e_1e_2...e_M b_1b_2...b_N
$$
其中 $s$ 保存符号位，$e_1e_2...e_M$ 保存指数，$b_1b_2...b_N$ 保存尾数。

## 指数偏差
对于双精度格式，其指数偏差为数字1023。它用于把正和负指数转化为正的二进制值保存在指数位中。例如数字 $1 = +1.00... \times 2^0$ 的双精度机器表示的指数位为
$$
    01111111111 = 0的二进制表示 + 1023的二进制表示
$$

## 无穷与NaN
对于特殊指数值2047，如果尾数位串都是0表示 $\infty$，否则表示 $NaN$，即
![](/img/post/How%20computer%20computes-inf-and-nan.PNG)

## 异常数字
另一个特殊的指数值0，此时数字为非标准的浮点数字，又称为异常数字，双精度格式下
$$
    \pm{0.b_1b_2b_3...b_i...b_{52} \times 2^{-1022}}
$$

# 有效数字缺失
计算机可表示的有效数字是有限的。在两个近似数相减时，经常会因为近似数的差异无法在有效数字内表示而出现错误，因此应该尽量避免近似数相减。通常可以考虑使用“共轭等式”的方法提高精度，例如
$$
    E_1 = \frac{1 - cos x}{sin^2 x}
$$
在 $x$ 趋于 $0$ 时 $1 \approx cos x$ 对上式的求解会有较大的误差。对分子和分母同时乘于 $1 + cos x$，得到
$$
    E_2 = \frac{1}{1 + cos x}
$$
$E_2$ 的计算保留了较多的有效数字，因此结果也更加精确。

# 算术上溢与下溢
由于浮点数指数位数的限制，其可表示的数有一定的范围。

算术上溢是指计算结果的指数超过计算机的最大指数表示，即指数在正值时的溢出。

算术下溢是指计算结果的指数超过计算机的最小指数表示，即指数在负值时的溢出。